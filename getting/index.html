<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Rafael de Oliveira Calcada">
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Getting Started - Steel Core Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Getting Started";
    var mkdocs_page_input_path = "getting.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Steel Core Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Overview</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Getting Started</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#what-you-need-to-know-first">What you need to know first</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#using-steel-in-your-project">Using Steel in your project</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#writing-software-for-steel">Writing software for Steel</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example-system">Example system</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../uarch/">Microarchitecture</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../config/">Configuration</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../steelio/">Input and Output Signals</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../timing/">Timing Diagrams</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../traps/">Exceptions and Interrupts</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../details/">Implementation Details</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Steel Core Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Getting Started</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/rafaelcalcada/steel-core/edit/master/docs/getting.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="getting-started">Getting Started</h1>
<h2 id="what-you-need-to-know-first">What you need to know first</h2>
<p>Steel must be connected to a word-addressed memory with 1 clock cycle read/write latency, which means that the memory takes 1 clock cycle to complete both read and write operations. The signals used to fetch instructions and to read/write data were designed to facilitate the integration with FPGA Block RAMs and memory arrays.</p>
<h2 id="using-steel-in-your-project">Using Steel in your project</h2>
<p>To use Steel in your project you must import all files from the <strong>rtl</strong> directory to it. Then instantiate Steel using the following template:</p>
<pre><code class="verilog">steel_top #(

    .BOOT_ADDRESS()     // You must provide a 32-bit value. If omitted the core will use
                        // its default value, 32'h00000000.
    ) core (

    // Optional inputs must be hardwired to zero if not used.

    .CLK(),             // Clock source (required, input, 1-bit)
    .RESET(),           // Reset (required, input, synchronous, active high, 1-bit)
    .REAL_TIME(),       // Value read from a real time counter (optional, input, 64-bit)
    .I_ADDR(),          // Instruction address (output, 32-bit)
    .INSTR(),           // Instruction data (required, input, 32-bit)
    .D_ADDR(),          // Data address (output, 32-bit)
    .DATA_OUT(),        // Data to be written (output, 32-bit)
    .WR_REQ(),          // Write enable (output, 1-bit)
    .WR_MASK(),         // Write mask (output, 4-bit). Also known as &quot;write strobe&quot;
    .DATA_IN(),         // Data read from memory (required, input, 32-bit)
    .E_IRQ(),           // External interrupt request (optional, active-high, input, 1-bit)
    .T_IRQ(),           // Timer interrupt request (optional, active-high, input, 1-bit)
    .S_IRQ()            // Software interrupt request (optional, active-high, input, 1-bit)

);
</code></pre>

<p>Read the section <a href="../steelio/">Input and Output Signals</a> for more information on the signals above.</p>
<h2 id="writing-software-for-steel">Writing software for Steel</h2>
<p>You can write and compile software for Steel using <a href="https://github.com/riscv/riscv-gnu-toolchain">RISC-V GNU Toolchain</a>. Follow the instructions in its <a href="https://github.com/riscv/riscv-gnu-toolchain/blob/master/README.md">README.md</a> file for installing the <strong>Newlib</strong> cross-compiler. You must use the following options to configure the installation:</p>
<pre><code>./configure --prefix=/opt/riscv --with-arch=rv32i --with-abi=ilp32
make
</code></pre>

<p>The <strong>util</strong> folder has a script (<strong>mengen.sh</strong>) that compiles a C file (*.c) and turns the generated program into a <strong>.mem</strong> file, which can be read by the Verilog <strong>$readmemh</strong> system task and then used to initialize a RAM memory array. This script requires <strong>riscv32-unknown-elf-gcc</strong>, <strong>riscv32-unknown-elf-objdump</strong> (provided by RISC-V GNU Toolchain) and <strong>riscv32-unknown-elf-elf2hex</strong> (which can be found <a href="https://github.com/sifive/elf2hex">here</a>).</p>
<h2 id="example-system">Example system</h2>
<p>The figure below shows an example of how Steel can be used as processing unit in embedded systems projects. The same architecture can be used to build other systems. The example is composed of an 8KB RAM memory array (<strong>ram.v</strong>), a memory mapped UART transmitter (<strong>uart_tx.v</strong>, 9600 baud rate, 1 stop bit, no parity and no control), a bus arbiter (<strong>bus_arbiter.v</strong>) and, of course, the Steel Core. The address 0x00010000 is used to access the UART transmitter. RAM addresses start at 0x00000000 and end at 0x00001fff. All other addresses are invalid. The bus arbiter is used to multiplex the data read/write signals according to the address the core wants to access. The timer and interrupt signals are hardwired to zero because neither timers nor interrupts are used in this system. To work properly, the system must be connected to a 100MHz clock source.</p>
<p><img alt="Steel SoC example" src="../images/steel-soc.png" /></p>
<p>The implementation files of this system can be found in the <strong>soc</strong> directory. The <strong>vivado</strong> directory has the project and implementation of this system for an Artix-7 FPGA (Digilent Nexys-4 board) built with Vivado. The <strong>util</strong> directory has an example program (<strong>hello.c</strong>) for it, which can be compiled using the <strong>memgen.sh</strong> script (see the section above). The program sends the string "Hello World, Steel!" through the UART transmitter, which is printed on the screen if the UART is connected to a terminal.</p>
<p>The code below shows how to send data through the UART transmitter in a C program:</p>
<pre><code>char* UART_ADDRESS = (char*) 0x00010000; // the UART address

while( (*UART_ADDRESS) != 1 ); // waits UART transmitter to be ready

(*UART_ADDRESS) = 'c'; // send a single character to UART transmitter
</code></pre>

<p>Or alternatively in RISC-V assembly:</p>
<pre><code>lui t0, 0x10 // loads in t0 the UART address

readyloop:
li  t1, 1
lw  t2, 0(t0);
bne t2, t1, readyloop; // checks if the UART is ready
li  t3, 0x63; // loads in t3 the character 'c'
sbu t3, 0(t0); // send the character to UART
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../uarch/" class="btn btn-neutral float-right" title="Microarchitecture">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Overview"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/rafaelcalcada/steel-core/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../uarch/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../extra.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
